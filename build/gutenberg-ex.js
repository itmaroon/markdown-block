(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},e.apply(this,arguments)}const t=window.wp.element,o=window.wp.hooks,r=window.wp.compose,l=window.wp.blockEditor,a=window.wp.components;function n(e){if(e){let o=null;if(["top","bottom","left","right"].some((t=>t in e))){let r={};for(let o in e){const l=e[o];if(String(l.width||"").match(/^0/))continue;const a=l.style||"solid";r[`border${t=o,t.charAt(0).toUpperCase()+t.slice(1)}`]=`${l.width} ${a} ${l.color}`}return o=r,o}{if(String(e.width||"").match(/^0/))return null;const t=e.style||"solid";return o={border:`${e.width} ${t} ${e.color}`},o}}return null;var t}const i=["core/paragraph","core/list","core/image","core/quote","core/table"];(0,o.addFilter)("blocks.registerBlockType","block-collections/add-attribute",(function(e,t){if(i.includes(t)){let o={};return o={margin_val:{type:"object",default:{top:"1em",left:"1em",bottom:"1em",right:"1em"}},padding_val:{type:"object",default:{top:"1em",left:"1em",bottom:"1em",right:"1em"}}},"core/paragraph"!==t&&"core/list"!==t&&"core/quote"!==t||(o={...o,lineHeight:{type:"number",default:1.6}}),"core/list"!==t&&"core/quote"!==t||(o={...o,radius_list:{type:"object",default:{topLeft:"0px",topRight:"0px",bottomRight:"0px",bottomLeft:"0px",value:"0px"}},border_list:{type:"object"}}),"core/list"===t&&(o={...o,list_type:{type:"string",default:"UL"}}),lodash.assign({},e,{attributes:lodash.assign({},e.attributes,o)})}return e}));const s=(0,r.createHigherOrderComponent)((e=>{const o={top:"1em",left:"1em",right:"1em",bottom:"1em"},r=[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}];return n=>{if("itmar_md_block"===n.attributes.className&&i.includes(n.name)){const{lineHeight:i,margin_val:s,padding_val:c,border_list:m,radius_list:p}=n.attributes,d=n.setAttributes;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,n),(0,t.createElement)(l.InspectorControls,{group:"styles"},(0,t.createElement)(a.PanelBody,{title:"間隔設定",initialOpen:!1},(0,t.createElement)(a.__experimentalBoxControl,{label:"マージン設定",values:s,onChange:e=>d({margin_val:e}),units:r,allowReset:!0,resetValues:o}),(0,t.createElement)(a.__experimentalBoxControl,{label:"パティング設定",values:c,onChange:e=>d({padding_val:e}),units:r,allowReset:!0,resetValues:o})),("core/paragraph"===n.name||"core/list"===n.name||"core/quote"===n.name)&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(a.PanelBody,{title:"行間設定"},(0,t.createElement)(a.RangeControl,{value:i,label:"lineHeight",max:3,min:1,step:.1,onChange:e=>d({lineHeight:e}),withInputField:!0}))),("core/list"===n.name||"core/quote"===n.name)&&(0,t.createElement)(a.PanelBody,{title:"ボーダー設定",initialOpen:!1,className:"border_design_ctrl"},(0,t.createElement)(a.__experimentalBorderBoxControl,{colors:[{color:"#72aee6"},{color:"#000"},{color:"#fff"}],onChange:e=>d({border_list:e}),value:m}),(0,t.createElement)(l.__experimentalBorderRadiusControl,{values:p,onChange:e=>d({radius_list:"string"==typeof e?{value:e}:e})}))))}return(0,t.createElement)(e,n)}}),"withInspectorControl");(0,o.addFilter)("editor.BlockEdit","block-collections/with-inspector-control",s);const c=(0,r.createHigherOrderComponent)((o=>r=>{const{attributes:l,name:a,isValid:s,wrapperProps:c}=r;if("itmar_md_block"===l.className&&i.includes(a)&&s){const{lineHeight:i,margin_val:s,padding_val:m,radius_list:p,border_list:d}=l;let u={};if(u={margin:`${s.top} ${s.right} ${s.bottom} ${s.left}`,padding:`${m.top} ${m.right} ${m.bottom} ${m.left}`},"core/paragraph"!==a&&"core/list"!==a&&"core/quote"!==a||(u={...u,lineHeight:i}),"core/list"===a||"core/quote"===a){const e=p&&1===Object.keys(p).length?p.value:`${p&&p.topLeft||""} ${p&&p.topRight||""} ${p&&p.bottomRight||""} ${p&&p.bottomLeft||""}`,t=n(d);u={...u,borderRadius:e,...t}}"core/image"===a&&"center"===l.align&&(u={...u,margin:`${s.top} auto ${s.bottom}`});let g=c;return g={...g,style:{...g&&{...g.style},...u}},(0,t.createElement)(o,e({},r,{wrapperProps:g}))}return(0,t.createElement)(o,r)}),"applyExtraAttributesInEditor");(0,o.addFilter)("editor.BlockListBlock","block-collections/extra-attributes-in-editor",c),(0,o.addFilter)("blocks.getSaveContent.extraProps","block-collections/-extra-attributes-in-front-end",((e,t,o)=>{if(e.className?.match(/itmar_md_block/)&&i.includes(t.name)){const{lineHeight:r,margin_val:l,padding_val:a,radius_list:i,border_list:s}=o;let c={};if(c={margin:`${l.top} ${l.right} ${l.bottom} ${l.left}`,padding:`${a.top} ${a.right} ${a.bottom} ${a.left}`},"core/paragraph"!==t.name&&"core/list"!==t.name&&"core/quote"!==t.name||(c={...c,lineHeight:r}),"core/list"===t.name||"core/quote"===t.name){const e=i&&1===Object.keys(i).length?i.value:`${i&&i.topLeft||""} ${i&&i.topRight||""} ${i&&i.bottomRight||""} ${i&&i.bottomLeft||""}`,t=n(s);c={...c,borderRadius:e,...t}}return"core/image"===t.name&&"center"===o.align&&(c={...c,margin:`${l.top} auto ${l.bottom}`}),Object.assign(e,{style:{...e.style,...c}})}return e}))})();