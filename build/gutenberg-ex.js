(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},e.apply(this,arguments)}const t=window.wp.element,r=window.wp.i18n,o=window.wp.hooks,l=window.wp.compose,a=window.wp.blockEditor,i=window.wp.components;function n(e){if(e){let r=null;if(["top","bottom","left","right"].some((t=>t in e))){let o={};for(let r in e){const l=e[r];if(String(l.width||"").match(/^0/))continue;const a=l.style||"solid";o[`border${t=r,t.charAt(0).toUpperCase()+t.slice(1)}`]=`${l.width} ${a} ${l.color}`}return r=o,r}{if(String(e.width||"").match(/^0/))return null;const t=e.style||"solid";return r={border:`${e.width} ${t} ${e.color}`},r}}return null;var t}const s=["core/paragraph","core/list","core/image","core/quote","core/table"];(0,o.addFilter)("blocks.registerBlockType","itmar-ex-block/add-setting",(function(e,t){if(s.includes(t)){let o={},l=[];return o={margin_val:{type:"object",default:{top:"1em",left:"1em",bottom:"1em",right:"1em"}},padding_val:{type:"object",default:{top:"1em",left:"1em",bottom:"1em",right:"1em"}}},"core/paragraph"!==t&&"core/list"!==t&&"core/quote"!==t||(o={...o,lineHeight:{type:"number",default:1.6}}),"core/list"!==t&&"core/quote"!==t&&"core/table"!==t||(o={...o,radius_list:{type:"object",default:{topLeft:"0px",topRight:"0px",bottomRight:"0px",bottomLeft:"0px",value:"0px"}},border_list:{type:"object"}}),"core/list"===t&&(o={...o,list_type:{type:"string",default:"UL"}}),"core/table"===t&&(l=[...e.styles||[],{name:"gradient",label:(0,r.__)("Gradient","itmar_block_collections"),isDefault:!1}]),{...e,attributes:{...e.attributes,...o},styles:l.length?l:e.styles}}return e}));const c=(0,l.createHigherOrderComponent)((e=>{const r={top:"1em",left:"1em",right:"1em",bottom:"1em"},o=[{value:"px",label:"px"},{value:"em",label:"em"},{value:"rem",label:"rem"}];return l=>{if((l.attributes.className?l.attributes.className.split(" "):[]).includes("itmar_ex_block")&&s.includes(l.name)){const{lineHeight:n,margin_val:s,padding_val:c,border_list:m,radius_list:p}=l.attributes,u=l.setAttributes;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(e,l),(0,t.createElement)(a.InspectorControls,{group:"styles"},(0,t.createElement)(i.PanelBody,{title:"間隔設定",initialOpen:!1},(0,t.createElement)(i.__experimentalBoxControl,{label:"マージン設定",values:s,onChange:e=>u({margin_val:e}),units:o,allowReset:!0,resetValues:r}),(0,t.createElement)(i.__experimentalBoxControl,{label:"パティング設定",values:c,onChange:e=>u({padding_val:e}),units:o,allowReset:!0,resetValues:r})),("core/paragraph"===l.name||"core/list"===l.name||"core/quote"===l.name)&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i.PanelBody,{title:"行間設定"},(0,t.createElement)(i.RangeControl,{value:n,label:"lineHeight",max:3,min:1,step:.1,onChange:e=>u({lineHeight:e}),withInputField:!0}))),("core/list"===l.name||"core/quote"===l.name||"core/table"===l.name)&&(0,t.createElement)(i.PanelBody,{title:"ボーダー設定",initialOpen:!1,className:"border_design_ctrl"},(0,t.createElement)(i.__experimentalBorderBoxControl,{colors:[{color:"#72aee6"},{color:"#000"},{color:"#fff"}],onChange:e=>u({border_list:e}),value:m}),(0,t.createElement)(a.__experimentalBorderRadiusControl,{values:p,onChange:e=>u({radius_list:"string"==typeof e?{value:e}:e})}))))}return(0,t.createElement)(e,l)}}),"withInspectorControl");(0,o.addFilter)("editor.BlockEdit","itmar-ex-block/with-inspector-control",c);const m=(0,l.createHigherOrderComponent)((r=>o=>{const{attributes:l,name:a,isValid:i,wrapperProps:c}=o;if((o.attributes.className?o.attributes.className.split(" "):[]).includes("itmar_ex_block")&&s.includes(a)&&i){const{lineHeight:i,margin_val:s,padding_val:m,radius_list:p,border_list:u}=l;let d={};if(d={margin:`${s.top} ${s.right} ${s.bottom} ${s.left}`,padding:`${m.top} ${m.right} ${m.bottom} ${m.left}`},"core/paragraph"!==a&&"core/list"!==a&&"core/quote"!==a||(d={...d,lineHeight:i}),"core/list"===a||"core/quote"===a){const e=p&&1===Object.keys(p).length?p.value:`${p&&p.topLeft||""} ${p&&p.topRight||""} ${p&&p.bottomRight||""} ${p&&p.bottomLeft||""}`,t=n(u);d={...d,borderRadius:e,...t}}if("core/image"===a&&"center"===l.align&&(d={...d,margin:`${s.top} auto ${s.bottom}`}),"core/table"===a){const e=n(u);d={...d,borderCollapse:"collapse",...e}}let g=c;return g={...g,style:{...g&&{...g.style},...d}},(0,t.createElement)(r,e({},o,{wrapperProps:g}))}return(0,t.createElement)(r,o)}),"applyExtraAttributesInEditor");(0,o.addFilter)("editor.BlockListBlock","block-collections/extra-attributes-in-editor",m),(0,o.addFilter)("blocks.getSaveContent.extraProps","block-collections/-extra-attributes-in-front-end",((e,t,r)=>{if(e.className?.match(/itmar_ex_block/)&&s.includes(t.name)){const{lineHeight:o,margin_val:l,padding_val:a,radius_list:i,border_list:s}=r;let c={};if(c={margin:`${l.top} ${l.right} ${l.bottom} ${l.left}`,padding:`${a.top} ${a.right} ${a.bottom} ${a.left}`},"core/paragraph"!==t.name&&"core/list"!==t.name&&"core/quote"!==t.name||(c={...c,lineHeight:o}),"core/list"===t.name||"core/quote"===t.name){const e=i&&1===Object.keys(i).length?i.value:`${i&&i.topLeft||""} ${i&&i.topRight||""} ${i&&i.bottomRight||""} ${i&&i.bottomLeft||""}`,t=n(s);c={...c,borderRadius:e,...t}}return"core/image"===t.name&&"center"===r.align&&(c={...c,margin:`${l.top} auto ${l.bottom}`}),Object.assign(e,{style:{...e.style,...c}})}return e}))})();